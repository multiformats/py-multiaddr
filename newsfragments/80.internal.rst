Added full tests and doc. All typecheck passes
